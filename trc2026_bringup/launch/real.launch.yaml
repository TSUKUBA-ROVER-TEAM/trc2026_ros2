launch:
  - node:
      pkg: foxglove_bridge
      exec: foxglove_bridge
      name: foxglove_bridge
      output: screen
      remap:
        - from: /joy
          to: /joy_foxglove
      param:
        - name: "asset_uri_allowlist"
          value: ["^package://.*$"]

  - node:
      pkg: robot_state_publisher
      exec: robot_state_publisher
      name: robot_state_publisher
      param:
        - name: robot_description
          value: $(command 'xacro $(find-pkg-share trc2026_description)/urdf/trc2026.xacro')

  - node:
      pkg: "trc2026_control"
      exec: "four_wheel_steer_controller_node"
      name: "four_wheel_steer_controller"
      output: "screen"

  - node:
      pkg: "micro_ros_agent"
      exec: "micro_ros_agent"
      name: "micro_ros_agent"
      output: "screen"
      args: "serial --dev /dev/ttyACM0 --baud 115200"

  - node:
      pkg: "trc2026_manual"
      exec: "drive_manual_controller_node"
      output: "screen"

  - node:
      pkg: "joy"
      exec: "joy_node"
      output: "screen"
      remap:
        - from: "joy"
          to: "joy_physical"

  - node:
      pkg: "trc2026_manual"
      exec: "joy_filter_node"
      name: "joy_filter"
      output: "screen"

  - node:
      pkg: "v4l2_camera"
      exec: "v4l2_camera_node"
      name: "front_camera"
      namespace: "front_camera"
      param:
        - name: "video_device"
          value: "/dev/video0"
        - name: "image_size"
          value: [320, 240]
        - name: "frame_id"
          value: "camera_link"
        - name: "pixel_format"
          value: "YUYV"
  
  - node:
      pkg: "v4l2_camera"
      exec: "v4l2_camera_node"
      name: "top_camera"
      namespace: "top_camera"
      param:
        - name: "video_device"
          value: "/dev/video2"
        - name: "image_size"
          value: [640, 480]
        - name: "frame_id"
          value: "camera_link"
        - name: "pixel_format"
          value: "YUYV"

  - node:
      pkg: "nmea_navsat_driver"
      exec: "nmea_serial_driver"
      name: "nmea_serial_driver"
      output: "screen"
      param:
        - name: "port"
          value: "/dev/ttyACM0"
        - name: "baud"
          value: 9600
        - name: "frame_id"
          value: "gps"
        - name: "time_ref_source"
          value: "gps"
        - name: "use_RMC"
          value: false